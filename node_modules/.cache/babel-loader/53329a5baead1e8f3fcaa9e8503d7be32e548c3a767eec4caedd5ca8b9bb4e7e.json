{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kllrq\\\\Desktop\\\\WEB\\\\tkm_front\\\\src\\\\components\\\\Item.js\";\nimport React, { Component } from 'react';\nimport DOMPurify from 'dompurify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sanitizeText = text => {\n  if (!text) return '';\n  return DOMPurify.sanitize(text, {\n    ALLOWED_TAGS: [],\n    ALLOWED_ATTR: []\n  });\n};\nconst validateImageUrl = url => {\n  if (!url) return './img/default.jpg';\n  if (url.startsWith('./img/') || url.startsWith('/img/')) {\n    return url;\n  }\n  if (url.startsWith('http://') || url.startsWith('https://')) {\n    return './img/default.jpg';\n  }\n  return './img/default.jpg';\n};\nexport class Item extends Component {\n  constructor(props) {\n    super(props);\n    this.handleImageError = () => {\n      this.setState({\n        imageError: true\n      });\n    };\n    this.state = {\n      imageError: false\n    };\n  }\n  render() {\n    var _item$price;\n    const {\n      item\n    } = this.props;\n    const {\n      imageError\n    } = this.state;\n    const safeTitle = sanitizeText(item === null || item === void 0 ? void 0 : item.title);\n    const safeDesc = sanitizeText(item === null || item === void 0 ? void 0 : item.desc);\n    const safePrice = sanitizeText(item === null || item === void 0 ? void 0 : (_item$price = item.price) === null || _item$price === void 0 ? void 0 : _item$price.toString());\n    const safeImage = imageError ? './img/default.jpg' : validateImageUrl(item === null || item === void 0 ? void 0 : item.img);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"item\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: safeImage,\n        alt: safeTitle || 'Товар',\n        onError: this.handleImageError,\n        loading: \"lazy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: safeTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: safeDesc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: [safePrice, \" \\u0440\\u0443\\u0431\\u043B\\u0435\\u0439\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-to-card\",\n        onClick: () => {\n          if (this.props.onAddToCart) {\n            this.props.onAddToCart(item);\n          }\n        },\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","DOMPurify","jsxDEV","_jsxDEV","sanitizeText","text","sanitize","ALLOWED_TAGS","ALLOWED_ATTR","validateImageUrl","url","startsWith","Item","constructor","props","handleImageError","setState","imageError","state","render","_item$price","item","safeTitle","title","safeDesc","desc","safePrice","price","toString","safeImage","img","className","children","src","alt","onError","loading","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onAddToCart"],"sources":["C:/Users/kllrq/Desktop/WEB/tkm_front/src/components/Item.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport DOMPurify from 'dompurify';\r\n\r\n\r\nconst sanitizeText = (text) => {\r\n  if (!text) return '';\r\n\r\n  return DOMPurify.sanitize(text, {\r\n    ALLOWED_TAGS: [], \r\n    ALLOWED_ATTR: []  \r\n  });\r\n};\r\n\r\nconst validateImageUrl = (url) => {\r\n  if (!url) return './img/default.jpg';\r\n  \r\n  if (url.startsWith('./img/') || url.startsWith('/img/')) {\r\n    return url;\r\n  }\r\n  \r\n  if (url.startsWith('http://') || url.startsWith('https://')) {\r\n    return './img/default.jpg';\r\n  }\r\n  \r\n  return './img/default.jpg';\r\n};\r\n\r\nexport class Item extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imageError: false\r\n    };\r\n  }\r\n\r\n  handleImageError = () => {\r\n    this.setState({ imageError: true });\r\n  };\r\n\r\n  render() {\r\n    const { item } = this.props;\r\n    const { imageError } = this.state;\r\n\r\n    const safeTitle = sanitizeText(item?.title);\r\n    const safeDesc = sanitizeText(item?.desc);\r\n    const safePrice = sanitizeText(item?.price?.toString());\r\n    const safeImage = imageError ? './img/default.jpg' : validateImageUrl(item?.img);\r\n\r\n    return (\r\n      <div className='item'>\r\n        <img \r\n          src={safeImage} \r\n          alt={safeTitle || 'Товар'}\r\n          onError={this.handleImageError}\r\n          loading=\"lazy\"\r\n        />\r\n        \r\n        <h2>{safeTitle}</h2>\r\n        <p>{safeDesc}</p>\r\n        <b>{safePrice} рублей</b>\r\n        \r\n        <div \r\n          className='add-to-card'\r\n          onClick={() => {\r\n            if (this.props.onAddToCart) {\r\n              this.props.onAddToCart(item);\r\n            }\r\n          }}\r\n        >\r\n          +\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGlC,MAAMC,YAAY,GAAIC,IAAI,IAAK;EAC7B,IAAI,CAACA,IAAI,EAAE,OAAO,EAAE;EAEpB,OAAOJ,SAAS,CAACK,QAAQ,CAACD,IAAI,EAAE;IAC9BE,YAAY,EAAE,EAAE;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;AACJ,CAAC;AAED,MAAMC,gBAAgB,GAAIC,GAAG,IAAK;EAChC,IAAI,CAACA,GAAG,EAAE,OAAO,mBAAmB;EAEpC,IAAIA,GAAG,CAACC,UAAU,CAAC,QAAQ,CAAC,IAAID,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,EAAE;IACvD,OAAOD,GAAG;EACZ;EAEA,IAAIA,GAAG,CAACC,UAAU,CAAC,SAAS,CAAC,IAAID,GAAG,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE;IAC3D,OAAO,mBAAmB;EAC5B;EAEA,OAAO,mBAAmB;AAC5B,CAAC;AAED,OAAO,MAAMC,IAAI,SAASZ,SAAS,CAAC;EAClCa,WAAWA,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAAC,KAMfC,gBAAgB,GAAG,MAAM;MACvB,IAAI,CAACC,QAAQ,CAAC;QAAEC,UAAU,EAAE;MAAK,CAAC,CAAC;IACrC,CAAC;IAPC,IAAI,CAACC,KAAK,GAAG;MACXD,UAAU,EAAE;IACd,CAAC;EACH;EAMAE,MAAMA,CAAA,EAAG;IAAA,IAAAC,WAAA;IACP,MAAM;MAAEC;IAAK,CAAC,GAAG,IAAI,CAACP,KAAK;IAC3B,MAAM;MAAEG;IAAW,CAAC,GAAG,IAAI,CAACC,KAAK;IAEjC,MAAMI,SAAS,GAAGlB,YAAY,CAACiB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,KAAK,CAAC;IAC3C,MAAMC,QAAQ,GAAGpB,YAAY,CAACiB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,IAAI,CAAC;IACzC,MAAMC,SAAS,GAAGtB,YAAY,CAACiB,IAAI,aAAJA,IAAI,wBAAAD,WAAA,GAAJC,IAAI,CAAEM,KAAK,cAAAP,WAAA,uBAAXA,WAAA,CAAaQ,QAAQ,CAAC,CAAC,CAAC;IACvD,MAAMC,SAAS,GAAGZ,UAAU,GAAG,mBAAmB,GAAGR,gBAAgB,CAACY,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAES,GAAG,CAAC;IAEhF,oBACE3B,OAAA;MAAK4B,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnB7B,OAAA;QACE8B,GAAG,EAAEJ,SAAU;QACfK,GAAG,EAAEZ,SAAS,IAAI,OAAQ;QAC1Ba,OAAO,EAAE,IAAI,CAACpB,gBAAiB;QAC/BqB,OAAO,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eAEFrC,OAAA;QAAA6B,QAAA,EAAKV;MAAS;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACpBrC,OAAA;QAAA6B,QAAA,EAAIR;MAAQ;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACjBrC,OAAA;QAAA6B,QAAA,GAAIN,SAAS,EAAC,uCAAO;MAAA;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAEzBrC,OAAA;QACE4B,SAAS,EAAC,aAAa;QACvBU,OAAO,EAAEA,CAAA,KAAM;UACb,IAAI,IAAI,CAAC3B,KAAK,CAAC4B,WAAW,EAAE;YAC1B,IAAI,CAAC5B,KAAK,CAAC4B,WAAW,CAACrB,IAAI,CAAC;UAC9B;QACF,CAAE;QAAAW,QAAA,EACH;MAED;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}